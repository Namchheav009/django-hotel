{% extends 'hotel/admin/admin_base.html' %}
{% block title %}Edit Review - Admin{% endblock %}

{% block admin_content %}
<div class="admin-content-title">
  <h2>Edit Review #{{ review.id }}</h2>
</div>
<div class="admin-card">
  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label class="form-label">User</label>
      <select name="user" class="form-select">
        {% for u in users %}
          <option value="{{ u.id }}" {% if u.id == review.user.id %}selected{% endif %}>{{ u.get_full_name|default:u.username }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Room</label>
      <select name="room" class="form-select">
        {% for r in rooms %}
          <option value="{{ r.id }}" {% if r.id == review.room.id %}selected{% endif %}>{{ r.room_number }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Reservation (optional)</label>
      <select name="reservation" class="form-select">
        <option value="">None</option>
        {% for res in reservations %}
          <option value="{{ res.id }}" {% if review.reservation and res.id == review.reservation.id %}selected{% endif %}>#{{ res.id }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Rating</label>
      <input type="number" name="rating" class="form-control" min="1" max="5" value="{{ review.rating }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Review</label>
      <textarea name="review" class="form-control" rows="4">{{ review.review }}</textarea>
    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-primary" type="submit">Save</button>
      <a class="btn btn-secondary" href="{% url 'manage_reviews' %}">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
